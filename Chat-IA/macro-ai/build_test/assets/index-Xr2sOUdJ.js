(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}})();function p(e){const t=e.toLowerCase();return{archetype:t.includes("futbol")?"football":void 0,elite:t.includes("elite"),discipline:t.includes("me cuesta")||t.includes("poca disciplina")?.3:t.includes("disciplinado")?.8:.5}}function m(e){return{archetype:e.archetype??"football",targetLevel:e.elite?"elite":"amateur",discipline:e.discipline??.5}}function u(e){return`
Si tu objetivo es llegar al fútbol ${e.targetLevel}:

• Disciplina estimada: ${(e.discipline*100).toFixed(0)}%
• Peso considerado: ${e.weight} kg

Vamos paso a paso, priorizando constancia.
  `}const l="macro_tracker_user";function a(){const e=localStorage.getItem(l);return e?JSON.parse(e):null}function d(e){localStorage.setItem(l,JSON.stringify(e))}function g(e){const t=a();if(!t)return;const s={...t,...e};d(s)}function f(e){return e.weight?null:"¿Cuánto pesás actualmente? (en kg)?"}function h(e){let t=a();if(!t){const s=p(e);return t=m(s),d(t),f(t)||u(t)}return t.weight?u(t):y(e)}function y(e){const t=parseInt(e);return isNaN(t)?"Decime tu peso en números, por ejemplo: 75":(g({weight:t}),`Perfecto. Con eso ya puedo ajustar tu alimentación.

`+u(a()))}document.addEventListener("DOMContentLoaded",()=>{try{let e=function(r,n=!1){try{const o=t;if(!o)return;const c=document.createElement("div");c.className=`message ${n?"user-message":"ai-message"}`,c.innerText=r,o.appendChild(c),o.scrollTo(0,o.scrollHeight)}catch(o){console.error("addMessage failed:",o)}};const t=document.getElementById("chatMessages"),s=document.querySelector(".chat-input"),i=document.querySelector(".chat-input input");if(!t||!s||!i)return;s.addEventListener("submit",r=>{r.preventDefault();try{const n=i.value.trim();if(!n)return;e(n,!0),i.value="",setTimeout(()=>{try{const o=h(n);e(o)}catch(o){console.error("Error handling user input:",o),e("⚠️ Ocurrió un error procesando tu mensaje. Intentá nuevamente.")}},600)}catch(n){console.error("Submit handler error:",n)}});try{if(!a())e("¡Hola! Soy tu asistente de Macro Tracker. Contame un poco sobre vos: ¿Qué deporte hacés? ¿Buscás llegar a la élite o mejorar tu salud?");else{const r=a(),n=f(r);e(n?"Hola de nuevo. Para completar tu perfil: "+n:"Hola de nuevo. Ya tengo tu perfil listo. ¿Querés reajustar algo o ver tus recomendaciones?")}}catch(r){console.error("Initial greeting error:",r)}}catch(e){console.error("DOM ready handler failed:",e)}});
